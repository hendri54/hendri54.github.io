<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ModelParams · ModelParams</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ModelParams</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href="index.html">ModelParams</a><ul class="internal"><li><a class="tocitem" href="#Background"><span>Background</span></a></li><li><a class="tocitem" href="#Parameters:-[Param](@ref)"><span>Parameters: <code>Param</code></span></a></li><li><a class="tocitem" href="#Parameter-Vectors:-ParamVector"><span>Parameter Vectors: <code>ParamVector</code></span></a></li><li><a class="tocitem" href="#Vectors-of-ParamVector"><span>Vectors of <code>ParamVector</code></span></a></li><li><a class="tocitem" href="#Calibrating-a-model"><span>Calibrating a model</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="index.html">ModelParams</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="index.html">ModelParams</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/hendri54/ModelParams/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="ModelParams"><a class="docs-heading-anchor" href="#ModelParams">ModelParams</a><a id="ModelParams-1"></a><a class="docs-heading-anchor-permalink" href="#ModelParams" title="Permalink"></a></h1><p>The purpose of <code>ModelParams</code> is to offer an automated workflow for handling model objects and their potentially calibrated or estimated parameters.</p><h2 id="Background"><a class="docs-heading-anchor" href="#Background">Background</a><a id="Background-1"></a><a class="docs-heading-anchor-permalink" href="#Background" title="Permalink"></a></h2><p>The target audience consists mainly of economists who calibrate or estimate structural models.</p><p>One may think of a model as a collection of model objects, such as utility functions, production functions, etc. Model objects may contain nested model objects. For example, a <code>household</code> model object may contain a utility function.</p><p>Typically, a researcher will calibrate many model versions that differ in:</p><ul><li>functional forms (e.g., log utility versus CARA)</li><li>which parameters are fixed versus calibrated</li><li>switches (e.g., does the model have preference shocks? How many types of households are there?)</li></ul><p>The challenge is then to keep track of:</p><ul><li>which fixed parameters need to be set?</li><li>which parameters need to be calibrated?</li><li>where to put the calibrated parameter values in the model?</li></ul><p>In addition, one needs to keep track of which data moments are used in the calibration and what the associated model moments are.</p><p>All of this is automated in <code>ModelParams</code>.</p><p>To see in action how this works, see the <code>SampleModel</code> repo in my <code>github</code> account.</p><h2 id="Parameters:-[Param](@ref)"><a class="docs-heading-anchor" href="#Parameters:-[Param](@ref)">Parameters: <a href="index.html#ModelParams.Param"><code>Param</code></a></a><a id="Parameters:-[Param](@ref)-1"></a><a class="docs-heading-anchor-permalink" href="#Parameters:-[Param](@ref)" title="Permalink"></a></h2><p>Model parameters that are either calibrated or fixed are defined in <a href="index.html#ModelParams.Param"><code>Param</code></a> objects. These encode default values (used when not calibrated), bounds, Latex symbols, and descriptions.</p><p>Vectors that are increasing are encoded in an <a href="index.html#ModelParams.IncreasingVector"><code>IncreasingVector</code></a>.</p><article class="docstring"><header><a class="docstring-binding" id="ModelParams.IncreasingVector" href="#ModelParams.IncreasingVector"><code>ModelParams.IncreasingVector</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">IncreasingVector</code></pre><p>Encodes an increasing vector of fixed length. Its values are calibrated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_types.jl#L63-L67">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.values" href="#Base.values"><code>Base.values</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Retrieve values of an <code>IncreasingVector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_types.jl#L75-L79">source</a></section><section><div><p>Returns all values of a <code>BoundedVector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/bounded_vector.jl#L60-L64">source</a></section><section><div><pre><code class="language-julia">values(iv, idx)
</code></pre><p>Returns a subset of the values of a <code>BoundedVector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/bounded_vector.jl#L92-L96">source</a></section></article><p><a href="index.html#ModelParams.BoundedVector"><code>BoundedVector</code></a> encodes a vector that is monotone and bounded.</p><article class="docstring"><header><a class="docstring-binding" id="ModelParams.BoundedVector" href="#ModelParams.BoundedVector"><code>ModelParams.BoundedVector</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Increasing or decreasing vector with bounds. The special case where the vector is of length 1 is supported.</p><p>A <code>BoundedVector</code> is typically constructed with an empty <code>ParamVector</code>. Then <a href="index.html#ModelParams.set_pvector!"><code>set_pvector!</code></a> is used to initialize the <code>ParamVector</code>. The <code>ParamVector</code> contains a single entry which must be named <code>:dxV</code>. It sets the values for the eponymous <code>BoundedVector</code> field. The <code>dxV</code> are typically in [0, 1]. They represent the increments in the vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_types.jl#L104-L112">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.set_pvector!" href="#ModelParams.set_pvector!"><code>ModelParams.set_pvector!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_pvector!(iv; description, symbol, isCalibrated)
</code></pre><p>Initialize the <code>ParamVector</code>. Requires <code>dxV</code> to be set. Note that bounds on <code>dxV</code> must be between 0 and 1. This is called after the <code>BoundedVector</code> has been constructed with an empty <code>ParamVector</code> but with the values of the field <code>dxV</code> set to reasonable defaults.</p><p><strong>Example</strong></p><pre><code class="language-none">dxV = [0.3, 0.2, 0.8];
b = BoundedVector(objId, ParamVector(objId), true, 1.0, 2.0, dxV);
set_pvector!(b; description = &quot;Gradient&quot;, symbol = &quot;g(x)&quot;);</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/bounded_vector.jl#L3-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.set_default_value!" href="#ModelParams.set_default_value!"><code>ModelParams.set_default_value!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_default_value!(iv, valueV)
</code></pre><p>Set the default values of a <code>BoundedVector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/bounded_vector.jl#L101-L105">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.fix_values!" href="#ModelParams.fix_values!"><code>ModelParams.fix_values!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Switches calibration toggle off. Sets values and default values everywhere. The end result is a <code>BoundedVector</code> with fixed (not calibrated) increments that result in values of <code>valueV</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/bounded_vector.jl#L42-L46">source</a></section></article><h2 id="Parameter-Vectors:-ParamVector"><a class="docs-heading-anchor" href="#Parameter-Vectors:-ParamVector">Parameter Vectors: <code>ParamVector</code></a><a id="Parameter-Vectors:-ParamVector-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-Vectors:-ParamVector" title="Permalink"></a></h2><p>The second key concept is a <a href="index.html#ModelParams.ParamVector"><code>ParamVector</code></a>. It collects all potentially calibrated model parameters, represented as <a href="index.html#ModelParams.Param"><code>Param</code></a> objects.</p><p>For convenience and performance, a <code>ModelObject</code> has a field for each <code>Param</code>. The field values should never be written to &quot;by hand.&quot; Functions are provided that sync fixed and calibrated parameters from the <code>ParamVector</code>.</p><p>To enable unambiguous matching of <code>ParamVector</code>s to child objects, each <code>ParamVector</code> contains the object&#39;s <code>ObjectId</code>.</p><article class="docstring"><header><a class="docstring-binding" id="ModelParams.ParamVector" href="#ModelParams.ParamVector"><code>ModelParams.ParamVector</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ParamVector</code></pre><p>Vector containing all of a model&#39;s potentially calibrated parameters. Parameters contain values, not just default values They are kept in sync with values in object</p><p>Intended workflow:     See <code>SampleModel</code>     Create a model object with parameters as fields         Otherwise the code gets too cumbersome         Constructor initializes ParamVector with defaults (or user inputs)     During calibration         Each object generates a Dict of calibrated parameters         Make this into a vector of Floats that can be passed to the optimizer.         Optimization algorithm changes the floats         Make floats back into Dict         Copy back into model objects</p><p>Going from a vector of Dicts to a vector of Floats and back:     <code>make_guess</code>     <code>set_params_from_guess!</code>     These are called on the top level model object</p><p><strong>ToDo: Make the process of going from model -&gt; vector and vice versa more robust.</strong></p><pre><code class="language-none">Currently, the user has to ensure that the ordering of ParamVectors and model
objects never changes.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaLang/julia/blob/788b2c77c10c2160f4794a4d4b6b81a95a90940c/base/#L0-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.Param" href="#ModelParams.Param"><code>ModelParams.Param</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Param</code></pre><p>Holds information about one potentially calibrated parameter (array). Default value must always be set. Determines size of inputs. Everything else can be either empty or must have the same size.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_types.jl#L1-L7">source</a></section></article><p>Useful access routines for <code>ParamVectors</code> include:</p><article class="docstring"><header><a class="docstring-binding" id="ModelParams.retrieve" href="#ModelParams.retrieve"><code>ModelParams.retrieve</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">retrieve</code></pre><p>Returns a named parameter and its index in the <code>ParamVector</code>. First occurrence. Returns 0 if not found.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_vector.jl#L67-L72">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.append!" href="#Base.append!"><code>Base.append!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">append!</code></pre><p>Append a <code>Param</code> to a <code>ParamVector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_vector.jl#L146-L150">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.remove!" href="#ModelParams.remove!"><code>ModelParams.remove!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">remove!(pvec, pName)
</code></pre><p>Remove the parameter names <code>pName</code> from <code>pvec</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_vector.jl#L157-L161">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.replace!" href="#ModelParams.replace!"><code>ModelParams.replace!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">replace!(pvec, p)
</code></pre><p>Replace a parameter with a new parameter <code>p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_vector.jl#L169-L173">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.change_calibration_status!" href="#ModelParams.change_calibration_status!"><code>ModelParams.change_calibration_status!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">change_calibration_status!(pvec, pName, doCal)
</code></pre><p>Set whether or not a parameter is calibrated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_vector.jl#L180-L184">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.change_value!" href="#ModelParams.change_value!"><code>ModelParams.change_value!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">change_value!(pvec, pName, newValue)
</code></pre><p>Change the value of parameter <code>pName</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_vector.jl#L197-L201">source</a></section><section><div><pre><code class="language-julia">change_value!(x, oName, pName, newValue)
</code></pre><p>Change value of a field in a <code>ModelObject</code> and its <code>ParamVector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/m_objects.jl#L108-L112">source</a></section></article><h2 id="Vectors-of-ParamVector"><a class="docs-heading-anchor" href="#Vectors-of-ParamVector">Vectors of <code>ParamVector</code></a><a id="Vectors-of-ParamVector-1"></a><a class="docs-heading-anchor-permalink" href="#Vectors-of-ParamVector" title="Permalink"></a></h2><p>These are used when all the <code>ParamVector</code>s from a <code>ModelObject</code> are collected.</p><article class="docstring"><header><a class="docstring-binding" id="ModelParams.find_pvector" href="#ModelParams.find_pvector"><code>ModelParams.find_pvector</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">find_pvector(pvv, objId)
</code></pre><p>Find a <code>ParamVector</code> for a given ObjectId.  Returns index and the <code>ParamVector</code>. Or <code>0</code> and <code>nothing</code> if not found.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/obj_pvectors.jl#L23-L28">source</a></section></article><h2 id="Calibrating-a-model"><a class="docs-heading-anchor" href="#Calibrating-a-model">Calibrating a model</a><a id="Calibrating-a-model-1"></a><a class="docs-heading-anchor-permalink" href="#Calibrating-a-model" title="Permalink"></a></h2><p>The workflow is implemented and tested in the <code>SampleModel</code> repo.</p><ol><li>Initialize a model object, including its child objects. E.g., <code>SampleModel.Model</code>.</li><li>Write the code and solves the model and computes any desired statistics. This part is not affected by anything related to <code>ModelParams</code> because the potentially calibrated parameters are stored inside each object and synced with the <code>ParamVector</code>s.</li><li>Write a deviation function that accepts a vector of calibrated parameters as an input. Call <a href="index.html#ModelParams.set_params_from_guess!"><code>set_params_from_guess!</code></a> to copy the parameter values from the vector into the various model objects.</li><li>In the calibration function, call <a href="index.html#ModelParams.make_guess"><code>make_guess</code></a> to make a vector of parameter values from the parameter values in all of the model objects.</li><li>Report the calibrated and fixed parameters using <a href="index.html#ModelParams.report_params"><code>report_params</code></a></li></ol><article class="docstring"><header><a class="docstring-binding" id="ModelParams.set_params_from_guess!" href="#ModelParams.set_params_from_guess!"><code>ModelParams.set_params_from_guess!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_params_from_guess!(m, guess)
</code></pre><p>Make vector of guesses into model parameters. For object and children. This changes the values in <code>m</code> and in its <code>pvector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/ModelParams.jl#L133-L138">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.make_guess" href="#ModelParams.make_guess"><code>ModelParams.make_guess</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">make_guess(m)
</code></pre><p>Make vector of parameters and bounds for an object Including nested objects</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/ModelParams.jl#L74-L79">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.report_params" href="#ModelParams.report_params"><code>ModelParams.report_params</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">report_params(pvec, isCalibrated; io, closeToBounds)
</code></pre><p>Reports calibrated (or fixed) parameters for one ParamVector as a <code>PrettyTable</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/param_vector.jl#L217-L221">source</a></section><section><div><pre><code class="language-julia">report_params(o, isCalibrated; io, closeToBounds)
</code></pre><p>Report all parameters by calibration status. For all ModelObjects contained in <code>o</code>.</p><p>Intended for reporting at the end (or during) a calibration run. Not formatted for inclusion in papers.</p><p>Each table row looks like: &quot;Description (name): value&quot;</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/ModelParams.jl#L147-L156">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelParams.param_tables" href="#ModelParams.param_tables"><code>ModelParams.param_tables</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">param_tables(o, isCalibrated)
</code></pre><p>Generate a set of <code>ParamTable</code>s. One table per model object. These are stored in a Dict with ObjectId&#39;s as keys.</p><p>The purpose is to make it easy to generate nicely formatted parameter tables that are grouped in a sensible way.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/hendri54/ModelParams/blob/5d516067f34538e8ebcce09f8943817a772e5396/src/ModelParams.jl#L189-L196">source</a></section></article><hr/></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 9 February 2021 11:44">Tuesday 9 February 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
